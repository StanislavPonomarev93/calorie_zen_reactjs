(this.webpackJsonpcalorie=this.webpackJsonpcalorie||[]).push([[0],{31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(1),i=a.n(s),o=a(22),c=a.n(o),l=a(7),r=(a(31),a(8)),h=a(2);a(32);a(33);a(34);a(35);var d=a(10),u=a(13),j=a(14),m=a(9),b=a(16),p=a(15),g="https://api.nomoreparties.co",f=[{id:1,calGoal:1200},{id:2,calGoal:1300},{id:3,calGoal:1400},{id:4,calGoal:1500},{id:5,calGoal:1600},{id:6,calGoal:1700},{id:7,calGoal:1800},{id:8,calGoal:1900},{id:9,calGoal:2e3},{id:10,calGoal:2100},{id:11,calGoal:2200},{id:12,calGoal:2300},{id:13,calGoal:2400},{id:14,calGoal:2500},{id:15,calGoal:2600},{id:16,calGoal:2700},{id:17,calGoal:2800},{id:18,calGoal:2900},{id:19,calGoal:3e3}],O=(a(36),function(e){Object(b.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t=e.target,a=t.name,s=t.value;n.setState(Object(d.a)({},a,s))},n.handleChangeCals=function(e){var t=e.target,a=t.name,s=t.value;n.setState(Object(d.a)({},a,s))},n.handleSubmit=function(e){var t,a,s,i;e.preventDefault(),n.state.password===n.state.confirmPassword&&(t=n.state.username,a=n.state.password,s=n.state.email,i=n.state.calGoal,fetch("".concat(g,"/auth/local/register"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:t,password:a,email:s,ru_cal_goal:i})}).then((function(e){return console.log(e),e.json()})).then((function(e){return console.log(e),e})).catch((function(e){return console.log(e)}))).then((function(e){e?n.props.history.push("/login"):console.log("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430.")}))},n.state={username:"",email:"",password:"",confirmPassword:"",calGoal:""},n.handleChange=n.handleChange.bind(Object(m.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(m.a)(n)),n.handleChangeCals=n.handleChangeCals.bind(Object(m.a)(n)),console.log("register"),n}return Object(j.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("div",{className:"register",children:[Object(n.jsx)("p",{className:"register__welcome",children:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044c."}),Object(n.jsxs)("form",{onSubmit:this.handleSubmit,className:"register__form",children:[Object(n.jsx)("label",{htmlFor:"username",children:"\u041b\u043e\u0433\u0438\u043d:"}),Object(n.jsx)("input",{id:"username",name:"username",type:"text",value:this.state.username,onChange:this.handleChange}),Object(n.jsx)("label",{htmlFor:"email",children:"Email:"}),Object(n.jsx)("input",{id:"email",name:"email",type:"email",value:this.state.email,onChange:this.handleChange}),Object(n.jsx)("label",{htmlFor:"password",children:"\u041f\u0430\u0440\u043e\u043b\u044c:"}),Object(n.jsx)("input",{id:"password",name:"password",type:"password",value:this.state.password,onChange:this.handleChange}),Object(n.jsx)("label",{htmlFor:"confirmPassword",children:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c:"}),Object(n.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",value:this.state.confirmPassword,onChange:this.handleChange}),Object(n.jsx)("label",{htmlFor:"calGoal",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438 \u0437\u0430 \u0434\u0435\u043d\u044c:"}),Object(n.jsx)("select",{name:"calGoal",value:this.state.calGoal,onChange:this.handleChangeCals,children:f.map((function(e,t){return Object(n.jsx)("option",{value:e.id,children:e.calGoal},t)}))}),Object(n.jsx)("div",{className:"register__button-container",children:Object(n.jsx)("button",{type:"submit",onSubmit:this.handleSubmit,className:"register__link",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]}),Object(n.jsxs)("div",{className:"register__signin",children:[Object(n.jsx)("p",{children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(n.jsx)(l.b,{to:"login",className:"register__login-link",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})}}]),a}(i.a.Component)),v=(Object(h.g)(O),a(42),function(e){Object(b.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={username:"",password:""},n.handleChange=n.handleChange.bind(Object(m.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(m.a)(n)),n}return Object(j.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(d.a)({},a,n))}},{key:"handleSubmit",value:function(e){var t,a,n=this;(e.preventDefault(),this.state.username&&this.state.password)&&(t=this.state.username,a=this.state.password,fetch("".concat(g,"/auth/local"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({identifier:t,password:a})}).then((function(e){return e.json()})).then((function(e){if(e.user)return localStorage.setItem("jwt",e.jwt),e})).catch((function(e){return console.log(e)}))).then((function(e){e.jwt&&n.setState({email:"",password:""},(function(){n.props.handleLogin(e.user.ru_cal_goal.calGoal),n.props.history.push("/diary")}))})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return Object(n.jsxs)("div",{className:"login",children:[Object(n.jsx)("p",{className:"login__welcome",children:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c!"}),Object(n.jsxs)("form",{onSubmit:this.handleSubmit,className:"login__form",children:[Object(n.jsx)("label",{htmlhtmlFor:"username",children:"\u041b\u043e\u0433\u0438\u043d:"}),Object(n.jsx)("input",{required:!0,id:"username",name:"username",type:"text",value:this.state.username,onChange:this.handleChange}),Object(n.jsx)("label",{htmlhtmlFor:"password",children:"\u041f\u0430\u0440\u043e\u043b\u044c:"}),Object(n.jsx)("input",{required:!0,id:"password",name:"password",type:"password",value:this.state.password,onChange:this.handleChange}),Object(n.jsx)("div",{className:"login__button-container",children:Object(n.jsx)("button",{type:"submit",onSubmit:this.handleSubmit,className:"login__link",children:"\u0412\u043e\u0439\u0442\u0438"})})]}),Object(n.jsxs)("div",{className:"login__signup",children:[Object(n.jsx)("p",{children:"\u0415\u0449\u0451 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(n.jsx)(l.b,{to:"/register",className:"signup__link",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})]})}}]),a}(i.a.Component));Object(h.g)(v),a(43);a(24),a(25),a(44);var w=Object(h.g)((function(){var e=Object(h.f)(),t=Object(s.useState)(localStorage.getItem("jwt")),a=Object(r.a)(t,2),i=(a[0],a[1]),o=Object(s.useState)(),c=Object(r.a)(o,2),l=(c[0],c[1]);return Object(s.useEffect)((function(){if(localStorage.getItem("jwt")){var t=localStorage.getItem("jwt");(a=t,fetch("".concat(g,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)}}).then((function(e){return e.json()})).then((function(e){return e}))).then((function(t){f.forEach((function(e){e.id===t.ru_cal_goal&&l(e.calGoal)})),t&&(i(!0),e.push("/diary"))}))}var a}),[e]),Object(n.jsx)(n.Fragment,{})}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(l.a,{children:Object(n.jsx)(w,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[45,1,2]]]);
//# sourceMappingURL=main.37faab99.chunk.js.map